---
title: "Africa RISING Locations"
author: "Zambia"
date: "Updated on 7/7/2016"
output: html_document
---

Currently showing `r dim(ar[ar$country_id=="ZMB",])[1]` camps and `r dim(zmb)[1]` villages. Village points are colored by camp.


```{r, echo=F}

bad <- c("Chibanga", "Mungulula", "Chingoma", "Kafa", "Kholongo", "Kanzizila", "Kazizila", "Lutangu", "Maondo", "Munguli", "Mwangano", "Ntaisa", "Simalumba")

# Generate leaflet map
leaflet(width="100%", height=640) %>%
  setView(30,-13, 6) %>%
  addProviderTiles("OpenTopoMap") %>%
  
  # Add rasters
  addRasterImage(alt, opacity=.6, group="Altitude", colors="RdYlBu") %>%
  addRasterImage(strat.zmb, opacity=.6, group="Stratification", colors=pal.elev) %>%
  
  # Add camps
  addMarkers(data=ar[ar$country_id=="ZMB",],
    group="Camps",
    label=~paste("Camp:", village),
    popup=~paste(
      paste("Region:", region), 
      paste("District:", district), 
      site_desc, sep="<br>"),    
    options=markerOptions(riseOnHover=T)) %>%
  
    # Add villages
  addCircleMarkers(data=zmb,
    fillColor=~colorFactor("Spectral", NULL)(site_desc), 
    group="Villages",
    label=~paste(village_id, paste("Village:", village), site_desc, sep=" | "), 
    popup=~paste(
      paste("Region:", region), 
      paste("District:", district), 
      site_desc,
      paste("Village:", village), sep="<br>"),
    color="white", weight=2, fillOpacity=1, radius=7,
    #clusterOptions=markerClusterOptions(),
    options=markerOptions(riseOnHover=T)) %>%
  
  # # Legend
  # addLegend(title="Zambia",
  #   opacity=1,
  #   position="bottomleft", 
  #   colors=c("green", "red"),
  #   labels=c("village (GPS seem OK)", "village (with bad GPS)"))  %>%
  
  # addLegend(title="Camps",
  #   opacity=1, pal="Spectral",
  #   position="bottomleft", 
  #   values=aslevels(zmb$site_desc),
  #   labels=levels(zmb$site_desc))  %>%  
  
  # Add layer control
  hideGroup(c("Altitude", "Stratification")) %>%
  addLayersControl(overlayGroups=c("Villages", "Camps", "Altitude", "Stratification"),
    options=layersControlOptions(collapsed=F)) %>%
  addScaleBar("bottomright")



```

